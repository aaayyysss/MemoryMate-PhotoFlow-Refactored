C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03>python main_qt.py [Startup] pillow_heif available ‚Äî HEIC/HEIF support enabled. üîá Decoder warnings suppressed per settings. üîá Decoder warnings suppressed (Qt, Pillow, ICC). ‚úÖ Loaded en translations from C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03\locales\en.json üåç Language initialized: en 2026-02-02 15:24:37,159 [INFO] ================================================================================ 2026-02-02 15:24:37,159 [INFO] MemoryMate-PhotoFlow logging initialized (level=INFO) 2026-02-02 15:24:37,159 [INFO] Log file: C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03\app_log.txt 2026-02-02 15:24:37,159 [INFO] ================================================================================ ============================================================ SCREEN INFORMATION (DPI-Aware) ============================================================ Resolution: 1920x1200 Available: 1920x1152 Category: FHD DPI Scale: 1.0x (100%) High-DPI: No Taskbar Height: 48px Adaptive Margin: 60px Adaptive Icons: 24px ============================================================ 2026-02-02 15:24:37,221 [INFO] Installed Qt message handler to suppress TIFF warnings 2026-02-02 15:24:37,221 [INFO] Qt message handler installed to suppress TIFF warnings [Main] Starting Qt event loop... [Startup] Database schema initialized successfully [Cache] {'entries': 0, 'size_mb': 0.0, 'path': 'C:\\Users\\suleimaa\\Downloads\\Photo-Sorter\\11.01.01.01-Photo-App\\MemoryMate-PhotoFlow-Refactored-main-03\\thumbnails_cache.db', 'last_updated': '2026-02-02 15:22'} 2026-02-02 15:24:38,006 [INFO] SearchService initialized [Startup] SearchService initialized 2026-02-02 15:24:38,006 [INFO] LRUCache initialized with capacity=200, max_memory=100.0MB 2026-02-02 15:24:38,006 [INFO] ThumbnailService initialized (L1 capacity=200, max_memory=100.0MB, timeout=5.0s) 2026-02-02 15:24:38,006 [INFO] Global ThumbnailService created with Phase 1B memory limits [Startup] ThumbnailService initialized 2026-02-02 15:24:43,553 [INFO] [SemanticEmbeddingService] Initialized with model=clip-vit-b32 2026-02-02 15:24:43,554 [INFO] [SemanticEmbeddingService] Loading model: clip-vit-b32 2026-02-02 15:24:43,554 [INFO] [SemanticEmbeddingService] Using CPU 2026-02-02 15:24:43,555 [INFO] [SemanticEmbeddingService] Searching for offline model... 2026-02-02 15:24:43,555 [INFO] [SemanticEmbeddingService] App root: C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03 2026-02-02 15:24:43,555 [INFO] [SemanticEmbeddingService] Looking for: openai--clip-vit-base-patch32 2026-02-02 15:24:43,555 [INFO] [SemanticEmbeddingService] Checking: C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03\Model\openai--clip-vit-base-patch32 2026-02-02 15:24:43,555 [INFO] [SemanticEmbeddingService] ‚Üí Exists: False 2026-02-02 15:24:43,555 [INFO] [SemanticEmbeddingService] Checking: C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03\model\openai--clip-vit-base-patch32 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] ‚Üí Exists: False 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] Checking: C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03\models\openai--clip-vit-base-patch32 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] ‚Üí Exists: False 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] Checking: C:\Users\suleimaa\.cache\huggingface\hub\models--openai--clip-vit-base-patch32 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] ‚Üí Exists: True 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] ‚Üí Has config.json: False 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] ‚Üí Has snapshots folder: True 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] ‚Üí Found 3 snapshot(s) 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] ‚Üí refs/main points to: 3d74acf9a28c67741b2f4f2ea7635f0aaf6f0268 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] ‚Üí Using snapshot: 3d74acf9a28c67741b2f4f2ea7635f0aaf6f0268 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] ‚Üí Snapshot has config.json: True 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] ‚Üí ‚úì VALID MODEL FOUND in HF cache snapshot! 2026-02-02 15:24:43,559 [INFO] [SemanticEmbeddingService] Loading from local path (offline mode): C:\Users\suleimaa\.cache\huggingface\hub\models--openai--clip-vit-base-patch32\snapshots\3d74acf9a28c67741b2f4f2ea7635f0aaf6f0268 Using a slow image processor as use_fast is unset and a slow processor was saved with this model. use_fast=True will be the default behavior in v4.52, even if the model was saved with a slow processor. This will result in minor differences in outputs. You'll still be able to use a slow processor with use_fast=False. 2026-02-02 15:24:44,060 [INFO] [SemanticEmbeddingService] Model loaded successfully: openai/clip-vit-base-patch32 2026-02-02 15:24:44,068 [INFO] [SemanticEmbeddingService] Model ready on cpu [Startup] ‚ö†Ô∏è CREATING MainWindow instance... üåç Language switched to: en [MainWindow] Language loaded from settings: en [LayoutManager] Registered layout: Current Layout (id=current) [LayoutManager] Registered layout: Google Photos Style (id=google) [LayoutManager] Registered layout: Apple Photos Style (id=apple) [LayoutManager] Registered layout: Lightroom Style (id=lightroom) [MainWindow] Layout manager initialized [MainWindow] üñ•Ô∏è Screen detected: 1920x1152 (DPI: 1.0x) [MainWindow] Screen geometry: x=0, y=0, w=1920, h=1152 [MainWindow] üìê Window size: 1800x1032 (margins: 60px) [MainWindow] üìç Window position: x=60, y=60 [MainWindow] ‚úì Window geometry: PySide6.QtCore.QRect(60, 60, 1800, 1032) üîá Qt/Pillow decoder warnings silenced (per user settings). ‚ö†Ô∏è Missing translation key: sidebar.people 2026-02-02 15:24:44,075 [INFO] SearchService initialized 2026-02-02 15:24:44,091 [INFO] [SemanticSearch] Result caching ENABLED (cachetools available) 2026-02-02 15:24:44,091 [INFO] [SemanticSearch] Result cache initialized (100 entries, 5min TTL) 2026-02-02 15:24:44,107 [INFO] [SemanticSearch] üîç Available CLIP models found: 2 2026-02-02 15:24:44,107 [INFO] ‚úì openai/clip-vit-base-patch32: Base model, fastest (512-D) (512-D, 600MB) 2026-02-02 15:24:44,107 [INFO] ‚úì openai/clip-vit-large-patch14: Large model, best quality (768-D) (768-D, 1700MB) ‚Üê WILL BE USED 2026-02-02 15:24:44,107 [INFO] [SemanticSearch] üéØ Will use: openai/clip-vit-large-patch14 - Large model, best quality (768-D) 2026-02-02 15:24:44,107 [INFO] [MainWindow] ‚ú® Semantic search widget added to toolbar - visible: False, size: PySide6.QtCore.QSize(100, 30) 2026-02-02 15:24:44,133 [INFO] [SessionState] Loaded: section=people, selection=person/face_000 [MainWindow] PHASE 1: Restoring project_id=1 from session state [Sidebar] Device auto-detection disabled (manual refresh only) [15:24:44.139] [Tabs] __init__ started [15:24:44.139] [Tabs] _build_tabs ‚Üí building tab widgets [15:24:44.139] [Tabs] _on_tab_changed(idx=0) [15:24:44.139] [Tabs] _start_timeout idx=0 type=branches [15:24:44.139] [Tabs] _populate_tab(branches, idx=0, force=False) [15:24:44.139] [Tabs] populated=False, loading=False [15:24:44.139] [Tabs] Starting load for branches [15:24:44.139] [Tabs] _show_loading idx=0 label='Loading Branches‚Ä¶' [15:24:44.139] [Tabs] _clear_tab idx=0 [15:24:44.139] [Tabs] _on_tab_changed ‚Üí tab_type=branches [15:24:44.139] [Tabs] _build_tabs ‚Üí added 7 tabs [15:24:44.139] [Tabs] __init__ completed [15:24:44.162] [AccordionSidebar] AccordionSidebar __init__ started [15:24:44.162] [AccordionSidebar] Building accordion sections... [15:24:44.170] [AccordionSidebar] Created 8 sections with nav buttons [15:24:44.170] [AccordionSidebar] Expanding section: people [15:24:44.170] [AccordionSidebar] Loading content for section: people [15:24:44.170] [AccordionSidebar] Loading People section... [15:24:44.170] [AccordionSidebar] People reload generation: 1 [15:24:44.170] [AccordionSidebar] ‚úì Section expanded: people [15:24:44.170] [AccordionSidebar] AccordionSidebar __init__ completed [SidebarQt] _build_tree_model() called with project_id=1 [Sidebar] Detaching old model from tree view [Sidebar] Pending events processed (skipped explicit processEvents) [Sidebar] Creating fresh model (avoiding Qt segfault) [Sidebar] Attaching fresh model to tree view [15:24:44.170] [AccordionSidebar] Loaded 0 face clusters (gen 1) [SidebarQt] list_branches() returned 1 branches [SidebarQt] Sample branches: [{'branch_key': 'all', 'display_name': 'üìÅ All Photos', 'count': 0}] [Sidebar] Loaded 0 folder counts in batch (performance optimization) [Sidebar] Loading videos for project_id=1 [Sidebar] Found 0 videos in project 1 2026-02-02 15:24:44,220 [INFO] [get_location_clusters] GPS columns exist: False 2026-02-02 15:24:44,220 [INFO] [get_location_clusters] get_photos_by_location returned 0 location groups 2026-02-02 15:24:44,220 [INFO] [get_location_clusters] Returning 0 location clusters [DeviceScanner] ===== Starting device scan ===== [DeviceScanner] Platform: Windows [DeviceScanner] Database registration: enabled [DeviceScanner] Scanning Windows drives... [DeviceScanner] Checking drive letters D:-Z:... [DeviceScanner] Checking portable devices (MTP/PTP)... [DeviceScanner] Attempting Shell COM enumeration... [DeviceScanner] COM initialized for current thread [DeviceScanner] Found 1 items under 'This PC' [DeviceScanner] ‚Üí Item: '(C:) SYSTEM' | IsFolder=True | IsFileSystem=True [DeviceScanner] COM uninitialized [DeviceScanner] ===== Scan complete: 0 device(s) found ===== [DeviceScanner] Results cached for 300.0s [Sidebar] No mobile devices detected - added help message [Sidebar] starting async count population for 1 branch targets [Sidebar][counts worker gen=2] running for 1 targets... [SidebarQt] switch_display_mode(list) - canceling old workers [SidebarQt] Hiding tabs controller and accordion [15:24:44.387] [Tabs] hide_tabs() called - canceling pending workers [SidebarQt] Canceled tab/accordion workers via hide [SidebarQt] Clearing tree view selection before rebuild [SidebarQt] Showing tree view [SidebarQt] Calling _build_tree_model() [SidebarQt] _build_tree_model() called with project_id=1 [Sidebar][counts worker gen=2] finished scanning targets, scheduling UI update [Sidebar] Detaching old model from tree view [Sidebar] Pending events processed (skipped explicit processEvents) [Sidebar] Creating fresh model (avoiding Qt segfault) [Sidebar] Attaching fresh model to tree view [SidebarQt] list_branches() returned 1 branches [SidebarQt] Sample branches: [{'branch_key': 'all', 'display_name': 'üìÅ All Photos', 'count': 0}] [Sidebar] Loaded 0 folder counts in batch (performance optimization) [Sidebar] Loading videos for project_id=1 [Sidebar] Found 0 videos in project 1 2026-02-02 15:24:44,409 [INFO] [get_location_clusters] GPS columns exist: False 2026-02-02 15:24:44,409 [INFO] [get_location_clusters] get_photos_by_location returned 0 location groups 2026-02-02 15:24:44,409 [INFO] [get_location_clusters] Returning 0 location clusters [DeviceScanner] ===== Using cached scan results ===== [DeviceScanner] Cache age: 0.03s (TTL: 300.0s) [DeviceScanner] Cached devices: 0 [DeviceScanner] ===== Scan complete (cached): 0 device(s) ===== [Sidebar] No mobile devices detected - added help message [Sidebar] starting async count population for 1 branch targets [Sidebar][counts worker gen=4] running for 1 targets... [SidebarQt] _build_tree_model() completed [Sidebar][counts worker gen=4] finished scanning targets, scheduling UI update [GRID] P2-26: Created dedicated thumbnail thread pool with 4 workers [LayoutManager] Initializing default layout: google [LayoutManager] Switching layout: current ‚Üí google [LayoutManager] üíæ Took ownership of original central widget: QWidget [GooglePhotosLayout] ‚ö†Ô∏è WARNING: No projects found! Please create a project first. [GooglePhotosLayout] Project selector populated with 0 projects (+ New Project option) [GooglePhotosLayout] ‚úì Reusing existing semantic_search widget from main_window [GooglePhotosLayout] ‚úì Semantic search widget visibility ensured [GooglePhotosLayout] ‚úì Semantic search toolbar visibility ensured 2026-02-02 15:24:45,027 [INFO] [AccordionSidebar] Initializing with project_id=None ‚ö†Ô∏è Missing translation key: sidebar.people_actions.expand_view 2026-02-02 15:24:45,049 [INFO] [AccordionSidebar] Created 8 sections 2026-02-02 15:24:45,049 [INFO] [AccordionSidebar] Expanding section: folders 2026-02-02 15:24:45,053 [WARNING] [FoldersSection] No project_id set 2026-02-02 15:24:45,178 [INFO] [AccordionSidebar] Section folders loaded and displayed [GooglePhotosLayout] ‚úÖ Scroll-triggered lazy loading enabled [GooglePhotosLayout] üì∑ Loading photos from database (thumb size: 200px)... [GooglePhotosLayout] üîÑ Clearing existing timeline and thumbnail cache... [GooglePhotosLayout] üîç Starting async photo load (generation 1)... [GooglePhotosLayout] ‚ö†Ô∏è No project selected [LayoutManager] Setting new central widget: QWidget [GooglePhotosLayout] Layout activated [LayoutManager] Switched to: Google Photos Style [Startup] Layout system initialized successfully [Startup] Database schema initialized successfully [MainWindow] ‚úÖ ‚úÖ ‚úÖ __init__() COMPLETED - returning to main_qt.py [MainWindow] Window object: <main_window_qt.MainWindow(0x209e6cb3aa0) at 0x0000020987DD5DC0> [MainWindow] Window valid: N/A [Startup] ‚úÖ MainWindow instance created successfully [Startup] MainWindow type: <class 'main_window_qt.MainWindow'> [Startup] MainWindow is valid: True [Startup] Updating splash progress to 95%... [15:24:45.260] [Tabs] _on_tab_changed(idx=0) [15:24:45.260] [Tabs] _start_timeout idx=0 type=branches [15:24:45.261] [Tabs] _populate_tab(branches, idx=0, force=False) [15:24:45.261] [Tabs] populated=False, loading=False [15:24:45.261] [Tabs] Starting load for branches [15:24:45.261] [Tabs] _show_loading idx=0 label='Loading Branches‚Ä¶' [15:24:45.261] [Tabs] _clear_tab idx=0 [15:24:45.261] [Tabs] _on_tab_changed ‚Üí tab_type=branches [15:24:45.261] [Tabs] _finish_branches (stale gen=1) ‚Äî ignoring [Sidebar][counts] Ignoring stale worker results (gen=2, current=4) [Sidebar][counts applied] updated UI with counts [MainWindow] PHASE 2: Using Current Layout (SidebarQt) - will restore via tree selection [Breadcrumb] _update_breadcrumb() CALLED [Breadcrumb] Grid state: navigation_mode=None, project_id=1 [Breadcrumb] Added project segment: My Photos [Breadcrumb] Added fallback segment: All Photos [Breadcrumb] Calling set_path() with 2 segments [BreadcrumbNav] set_path() called with 2 segments [BreadcrumbNav] Clearing 0 existing widgets [BreadcrumbNav] Cleared all existing widgets [BreadcrumbNav] Added segment 0: My Photos [BreadcrumbNav] Added segment 1: All Photos [BreadcrumbNav] set_path() completed - 2 segments added [Breadcrumb] set_path() completed successfully [Breadcrumb] _update_breadcrumb() COMPLETED [Startup] Processing events... [15:24:45.327] [Tabs] _clear_tab idx=0 [Startup] Events processed, ready to show window [Startup] Showing main window... [Startup] Window geometry before show(): PySide6.QtCore.QRect(60, 60, 1800, 1032) [Startup] Window visible before show(): False [Startup] Window visible after show(): True [Startup] Window geometry after show(): PySide6.QtCore.QRect(60, 91, 1800, 1032) [Startup] Window position: x=60, y=60, w=1800, h=1032 [Startup] Window on screen: \\.\DISPLAY1 [MainWindow] ‚úì Window is on-screen (center at 959, 606) [Startup] Window raised and activated [MainWindow] Starting deferred initialization... [Sidebar] reload_date_tree() method not available - skipping [MainWindow] ‚úÖ Database and sidebar initialized [MainWindow] ‚úÖ Session state restoration scheduled [MainWindow] ‚úÖ Status bar updated [MainWindow] ‚úÖ Deferred initialization completed successfully [Startup] ‚úÖ Main window should now be visible [Startup] If window is not visible, check: [Startup] 1. Window position: (60, 60) [Startup] 2. Window size: 1800x1032 [Startup] 3. Screen geometry: PySide6.QtCore.QRect(0, 0, 1920, 1152) [Startup] 4. Check if window is off-screen or on disconnected monitor 2026-02-02 15:24:45,566 [INFO] [Main] Async FFmpeg detection worker launched 2026-02-02 15:24:45,570 [INFO] [FFmpegDetectionWorker] Starting async FFmpeg detection... 2026-02-02 15:24:45,570 [INFO] [FFmpegDetectionWorker] Fresh detection completed in 0.00s ‚úÖ InsightFace detected with buffalo_l models Location: C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03\models\buffalo_l [MainWindow] PHASE 3 (SidebarQt): No selection to restore [MainWindow] PHASE 2: Using Current Layout (SidebarQt) - will restore via tree selection [MainWindow] PHASE 3 (SidebarQt): No selection to restore [GooglePhotosLayout] ‚ûï New Project option selected [GooglePhotosLayout] üÜïüÜïüÜï CREATE PROJECT BUTTON CLICKED! üÜïüÜïüÜï [GooglePhotosLayout] ‚úì Calling breadcrumb_nav._create_new_project()... [Breadcrumb] _switch_project(1) called [Breadcrumb] Already on project 1, skipping switch [MainWindow] Refreshed project list: 1 projects [GooglePhotosLayout] ‚úì Project creation dialog completed [GooglePhotosLayout] Updated project_id: 1 [GooglePhotosLayout] Project selector populated with 1 projects (+ New Project option) [GooglePhotosLayout] üì∑ Loading photos from database (thumb size: 200px)... [GooglePhotosLayout] üîÑ Clearing existing timeline and thumbnail cache... [GooglePhotosLayout] üîç Starting async photo load (generation 2)... [GooglePhotosLayout] ‚úÖ Photo load worker started (generation 2) [GooglePhotosLayout] ‚úì Layout refreshed after project creation 2026-02-02 15:25:01,530 [INFO] Photo query complete: generation=2, current=2, rows=0 [GooglePhotosLayout] No photos found in project 1 2026-02-02 15:25:16,532 [INFO] Database schema initialized successfully 2026-02-02 15:25:16,532 [INFO] DBWriter timer started in worker thread 2026-02-02 15:25:16,556 [INFO] [ScanWorkerAdapter] Starting scan of C:/Users/suleimaa/Downloads/Photo-Sorter/Images (thread=Dummy-10, is_main=False) 2026-02-02 15:25:16,556 [INFO] Starting scan: C:/Users/suleimaa/Downloads/Photo-Sorter/Images (incremental=True, skip_unchanged=True) 2026-02-02 15:25:16,561 [INFO] Discovered 15 candidate image files and 0 video files 2026-02-02 15:25:16,563 [INFO] Loading existing metadata for incremental scan... 2026-02-02 15:25:16,572 [INFO] ‚úì Loaded 0 existing photo records and 0 video records [SCAN] Created single executor for scan (15 files) [SCAN] _process_file started for: Alya1_2_2_2.jpeg [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:16,595 [INFO] üì∑ Processing: Alya1_2_2_2.jpeg (345.2 KB) [SCAN] Processing: Alya1_2_2_2.jpeg [SCAN] ‚úì Metadata extracted: Alya1_2_2_2.jpeg [w=1440, h=2560, date=2024-11-29 17:04:13] 2026-02-02 15:25:16,683 [INFO] [Scan] Metadata extracted successfully: Alya1_2_2_2.jpeg [w=1440, h=2560, date=2024-11-29 17:04:13] [SCAN] Creating folder hierarchy for: Alya1_2_2_2.jpeg [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Alya1_2_2_2.jpeg [SCAN] _process_file started for: Alya1_3_2.jpeg [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:16,712 [INFO] üì∑ Processing: Alya1_3_2.jpeg (345.2 KB) [SCAN] Processing: Alya1_3_2.jpeg [SCAN] ‚úì Metadata extracted: Alya1_3_2.jpeg [w=1440, h=2560, date=2024-11-29 17:04:13] 2026-02-02 15:25:16,721 [INFO] [Scan] Metadata extracted successfully: Alya1_3_2.jpeg [w=1440, h=2560, date=2024-11-29 17:04:13] [SCAN] Creating folder hierarchy for: Alya1_3_2.jpeg [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Alya1_3_2.jpeg [SCAN] _process_file started for: Alya2_2_2_2_2.jpeg [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:16,770 [INFO] üì∑ Processing: Alya2_2_2_2_2.jpeg (107.1 KB) [SCAN] Processing: Alya2_2_2_2_2.jpeg [SCAN] ‚úì Metadata extracted: Alya2_2_2_2_2.jpeg [w=611, h=1081, date=2024-12-02 17:24:41] 2026-02-02 15:25:16,770 [INFO] [Scan] Metadata extracted successfully: Alya2_2_2_2_2.jpeg [w=611, h=1081, date=2024-12-02 17:24:41] [SCAN] Creating folder hierarchy for: Alya2_2_2_2_2.jpeg [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Alya2_2_2_2_2.jpeg [SCAN] _process_file started for: Alya3_2_2_2_2.jpeg [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:16,818 [INFO] üì∑ Processing: Alya3_2_2_2_2.jpeg (97.2 KB) [SCAN] Processing: Alya3_2_2_2_2.jpeg [SCAN] ‚úì Metadata extracted: Alya3_2_2_2_2.jpeg [w=1080, h=810, date=None] 2026-02-02 15:25:16,819 [INFO] [Scan] Metadata extracted successfully: Alya3_2_2_2_2.jpeg [w=1080, h=810, date=None] [SCAN] Creating folder hierarchy for: Alya3_2_2_2_2.jpeg [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Alya3_2_2_2_2.jpeg [SCAN] _process_file started for: Alya_2_2.jpeg [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:16,852 [INFO] üì∑ Processing: Alya_2_2.jpeg (181.4 KB) [SCAN] Processing: Alya_2_2.jpeg [SCAN] ‚úì Metadata extracted: Alya_2_2.jpeg [w=965, h=1240, date=None] 2026-02-02 15:25:16,852 [INFO] [Scan] Metadata extracted successfully: Alya_2_2.jpeg [w=965, h=1240, date=None] [SCAN] Creating folder hierarchy for: Alya_2_2.jpeg [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Alya_2_2.jpeg [SCAN] _process_file started for: Alya_2_2_2_2.jpeg [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:16,900 [INFO] üì∑ Processing: Alya_2_2_2_2.jpeg (181.4 KB) [SCAN] Processing: Alya_2_2_2_2.jpeg [SCAN] ‚úì Metadata extracted: Alya_2_2_2_2.jpeg [w=965, h=1240, date=None] 2026-02-02 15:25:16,900 [INFO] [Scan] Metadata extracted successfully: Alya_2_2_2_2.jpeg [w=965, h=1240, date=None] [SCAN] Creating folder hierarchy for: Alya_2_2_2_2.jpeg [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Alya_2_2_2_2.jpeg [SCAN] _process_file started for: Ammar-Ref(1)_2_2.png [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:16,932 [INFO] üì∑ Processing: Ammar-Ref(1)_2_2.png (800.9 KB) [SCAN] Processing: Ammar-Ref(1)_2_2.png [SCAN] ‚úì Metadata extracted: Ammar-Ref(1)_2_2.png [w=1140, h=791, date=None] 2026-02-02 15:25:16,936 [INFO] [Scan] Metadata extracted successfully: Ammar-Ref(1)_2_2.png [w=1140, h=791, date=None] [SCAN] Creating folder hierarchy for: Ammar-Ref(1)_2_2.png [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Ammar-Ref(1)_2_2.png [SCAN] _process_file started for: Ammar-Ref_2_2_2.png [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:16,971 [INFO] üì∑ Processing: Ammar-Ref_2_2_2.png (800.9 KB) [SCAN] Processing: Ammar-Ref_2_2_2.png [SCAN] ‚úì Metadata extracted: Ammar-Ref_2_2_2.png [w=1140, h=791, date=None] 2026-02-02 15:25:16,980 [INFO] [Scan] Metadata extracted successfully: Ammar-Ref_2_2_2.png [w=1140, h=791, date=None] [SCAN] Creating folder hierarchy for: Ammar-Ref_2_2_2.png [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Ammar-Ref_2_2_2.png [SCAN] _process_file started for: Ammar-Ref_3_2.png [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:17,012 [INFO] üì∑ Processing: Ammar-Ref_3_2.png (800.9 KB) [SCAN] Processing: Ammar-Ref_3_2.png [SCAN] ‚úì Metadata extracted: Ammar-Ref_3_2.png [w=1140, h=791, date=None] 2026-02-02 15:25:17,021 [INFO] [Scan] Metadata extracted successfully: Ammar-Ref_3_2.png [w=1140, h=791, date=None] [SCAN] Creating folder hierarchy for: Ammar-Ref_3_2.png [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Ammar-Ref_3_2.png [SCAN] _process_file started for: Ammar1_2_2_2.jpeg [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:17,060 [INFO] üì∑ Processing: Ammar1_2_2_2.jpeg (4364.7 KB) [SCAN] Processing: Ammar1_2_2_2.jpeg [SCAN] ‚úì Metadata extracted: Ammar1_2_2_2.jpeg [w=4032, h=3024, date=2024-08-11 19:40:38] 2026-02-02 15:25:17,076 [INFO] [Scan] Metadata extracted successfully: Ammar1_2_2_2.jpeg [w=4032, h=3024, date=2024-08-11 19:40:38] [SCAN] Creating folder hierarchy for: Ammar1_2_2_2.jpeg [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Ammar1_2_2_2.jpeg [SCAN] _process_file started for: Ammar2_2_2_2 - Kopie.jpeg [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:17,109 [INFO] üì∑ Processing: Ammar2_2_2_2 - Kopie.jpeg (2338.2 KB) [SCAN] Processing: Ammar2_2_2_2 - Kopie.jpeg [SCAN] ‚úì Metadata extracted: Ammar2_2_2_2 - Kopie.jpeg [w=3664, h=2062, date=2024-11-18 14:17:43] 2026-02-02 15:25:17,121 [INFO] [Scan] Metadata extracted successfully: Ammar2_2_2_2 - Kopie.jpeg [w=3664, h=2062, date=2024-11-18 14:17:43] [SCAN] Creating folder hierarchy for: Ammar2_2_2_2 - Kopie.jpeg [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Ammar2_2_2_2 - Kopie.jpeg [SCAN] _process_file started for: Ammar2_2_2_2.jpeg [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:17,156 [INFO] üì∑ Processing: Ammar2_2_2_2.jpeg (2338.2 KB) [SCAN] Processing: Ammar2_2_2_2.jpeg [SCAN] ‚úì Metadata extracted: Ammar2_2_2_2.jpeg [w=3664, h=2062, date=2024-11-18 14:17:43] 2026-02-02 15:25:17,156 [INFO] [Scan] Metadata extracted successfully: Ammar2_2_2_2.jpeg [w=3664, h=2062, date=2024-11-18 14:17:43] [SCAN] Creating folder hierarchy for: Ammar2_2_2_2.jpeg [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Ammar2_2_2_2.jpeg [SCAN] _process_file started for: Ammar3_2_2_2_2.jpeg [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:17,199 [INFO] üì∑ Processing: Ammar3_2_2_2_2.jpeg (171.0 KB) [SCAN] Processing: Ammar3_2_2_2_2.jpeg [SCAN] ‚úì Metadata extracted: Ammar3_2_2_2_2.jpeg [w=1284, h=2778, date=None] 2026-02-02 15:25:17,201 [INFO] [Scan] Metadata extracted successfully: Ammar3_2_2_2_2.jpeg [w=1284, h=2778, date=None] [SCAN] Creating folder hierarchy for: Ammar3_2_2_2_2.jpeg [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: Ammar3_2_2_2_2.jpeg [SCAN] _process_file started for: IMG_6850_2_2_2.jpeg [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:17,316 [INFO] üì∑ Processing: IMG_6850_2_2_2.jpeg (3027.8 KB) [SCAN] Processing: IMG_6850_2_2_2.jpeg [SCAN] ‚úì Metadata extracted: IMG_6850_2_2_2.jpeg [w=4032, h=3024, date=2025-07-30 23:19:46] 2026-02-02 15:25:17,318 [INFO] [Scan] Metadata extracted successfully: IMG_6850_2_2_2.jpeg [w=4032, h=3024, date=2025-07-30 23:19:46] [SCAN] Creating folder hierarchy for: IMG_6850_2_2_2.jpeg [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: IMG_6850_2_2_2.jpeg [SCAN] _process_file started for: IMG_6995_2_2_2.jpeg [SCAN] Getting file stats... [SCAN] File stats retrieved successfully 2026-02-02 15:25:17,351 [INFO] üì∑ Processing: IMG_6995_2_2_2.jpeg (4005.3 KB) [SCAN] Processing: IMG_6995_2_2_2.jpeg [SCAN] ‚úì Metadata extracted: IMG_6995_2_2_2.jpeg [w=4032, h=3024, date=2025-08-09 13:06:18] 2026-02-02 15:25:17,353 [INFO] [Scan] Metadata extracted successfully: IMG_6995_2_2_2.jpeg [w=4032, h=3024, date=2025-08-09 13:06:18] [SCAN] Creating folder hierarchy for: IMG_6995_2_2_2.jpeg [SCAN] ‚úì Folder hierarchy created: folder_id=2 [SCAN] ‚úì File processed successfully: IMG_6995_2_2_2.jpeg [SCAN] ‚ö° Writing final batch to database: 15 photos 2026-02-02 15:25:17,391 [INFO] Writing final batch of 15 photos to database [SCAN] üíæ Starting bulk_upsert for 15 photos... 2026-02-02 15:25:17,393 [INFO] [DB] Starting bulk_upsert for 15 photos 2026-02-02 15:25:17,441 [INFO] Bulk upserted 15 photos for project 1 [SCAN] ‚úì Bulk_upsert completed: 15 photos written 2026-02-02 15:25:17,441 [INFO] [DB] Bulk_upsert completed: 15 photos written [SCAN] ‚úì Final batch write complete [SCAN] Shutting down executor 2026-02-02 15:25:17,441 [INFO] Executor shutdown complete [SCAN] === STEP 4: VIDEO PROCESSING === [SCAN] total_videos=0 [SCAN] self._cancelled=False [SCAN] Condition check: 0 > 0 and not False = False [SCAN] Condition FALSE - skipping video processing! [SCAN] Reason: No videos found (total_videos=0) 2026-02-02 15:25:17,459 [INFO] Scan complete: 15 photos indexed, 0 videos indexed, 0 skipped, 0 failed in 0.9s 2026-02-02 15:25:17,460 [INFO] Scan completed: 15 photos, 0 videos, 1 folders in 0.9s 2026-02-02 15:25:17,460 [INFO] Scan finished: 1 folders, 15 photos, 0 videos 2026-02-02 15:25:17,632 [INFO] Building date branches... 2026-02-02 15:25:17,632 [INFO] Building date branches for project_id=1 [build_date_branches] Using project_id=1 [build_date_branches] Populating 'all' branch with 15 photos for project 1 [build_date_branches] Inserted 15/15 photos into 'all' branch [build_date_branches] Found 6 unique dates for project 1 [build_date_branches] Date 2024-08-11: found 1 photos for project 1 [build_date_branches] Sample path: c:/users/suleimaa/downloads/photo-sorter/images/output6/ammar1_2_2_2.jpeg [build_date_branches] Date 2024-08-11: inserted 1/1 into project_images (new) [build_date_branches] Date 2024-11-18: found 2 photos for project 1 [build_date_branches] Sample path: c:/users/suleimaa/downloads/photo-sorter/images/output6/ammar2_2_2_2 - kopie.jpeg [build_date_branches] Date 2024-11-18: inserted 2/2 into project_images (new) [build_date_branches] Date 2024-11-29: found 2 photos for project 1 [build_date_branches] Sample path: c:/users/suleimaa/downloads/photo-sorter/images/output6/alya1_2_2_2.jpeg [build_date_branches] Date 2024-11-29: inserted 2/2 into project_images (new) [build_date_branches] Date 2024-12-02: found 1 photos for project 1 [build_date_branches] Sample path: c:/users/suleimaa/downloads/photo-sorter/images/output6/alya2_2_2_2_2.jpeg [build_date_branches] Date 2024-12-02: inserted 1/1 into project_images (new) [build_date_branches] Date 2025-07-30: found 1 photos for project 1 [build_date_branches] Sample path: c:/users/suleimaa/downloads/photo-sorter/images/output6/img_6850_2_2_2.jpeg [build_date_branches] Date 2025-07-30: inserted 1/1 into project_images (new) [build_date_branches] Date 2025-08-09: found 1 photos for project 1 [build_date_branches] Sample path: c:/users/suleimaa/downloads/photo-sorter/images/output6/img_6995_2_2_2.jpeg [build_date_branches] Date 2025-08-09: inserted 1/1 into project_images (new) [build_date_branches] Total entries processed: 8 [build_date_branches] project_images table has 23 rows for project 1 2026-02-02 15:25:17,638 [INFO] Created 8 photo date branch entries for project 1 2026-02-02 15:25:17,638 [INFO] Building video date branches for project_id=1 [build_video_date_branches] Using project_id=1 [build_video_date_branches] Found 0 videos with dates for project 1 [build_video_date_branches] No videos with dates found, skipping branch creation 2026-02-02 15:25:17,638 [INFO] Created 0 video date branch entries for project 1 2026-02-02 15:25:17,638 [INFO] Backfilling created_date fields for photos... 2026-02-02 15:25:17,638 [INFO] Backfilled 7 photo rows with created_date 2026-02-02 15:25:17,638 [INFO] Backfilling created_date fields for videos... 2026-02-02 15:25:17,638 [INFO] Enqueueing duplicate detection pipeline as background job... 2026-02-02 15:25:17,646 [INFO] Post-scan pipeline dispatched to background thread pool 2026-02-02 15:25:17,646 [INFO] [PostScanPipelineWorker] Starting post-scan pipeline for project 1 (thread=Dummy-8, is_main=False) 2026-02-02 15:25:17,646 [INFO] Main scan operations complete. Remaining: set() 2026-02-02 15:25:17,646 [INFO] ‚úì All scan operations complete. Triggering final refresh... 2026-02-02 15:25:17,662 [INFO] Starting hash backfill and asset linking for project 1 2026-02-02 15:25:17,662 [INFO] Starting hash backfill and asset linking for project 1 2026-02-02 15:25:17,683 [INFO] Found 15 photos without instance links 2026-02-02 15:25:17,757 [INFO] üîÑ Starting final coordinated refresh... 2026-02-02 15:25:17,757 [INFO] Reloading sidebar after date branches built... 2026-02-02 15:25:17,757 [INFO] [AccordionSidebar] Switching project: None ‚Üí 1 2026-02-02 15:25:17,757 [INFO] [FoldersSection] Loading folders (generation 3)... [GRID] ====== reload() CALLED ====== [GRID] project_id=1, load_mode=None [GRID] Step 1: Setting _reloading=True [GRID] Fetched tags for 0 paths, got 0 entries [GRID] Loaded 0 thumbnails. [GRID] Reloaded 0 thumbnails in None-mode (base=0) [GRID] Step 5: Emitting gridReloaded signal... [Breadcrumb] _update_breadcrumb() CALLED [Breadcrumb] Grid state: navigation_mode=None, project_id=1 [Breadcrumb] Looking for CURRENT project_id=1 in 1 projects [Breadcrumb] Found CURRENT project name: P01 [Breadcrumb] Added project segment: P01 [Breadcrumb] Added fallback segment: All Photos [Breadcrumb] Calling set_path() with 2 segments [BreadcrumbNav] set_path() called with 2 segments [BreadcrumbNav] Clearing 3 existing widgets [BreadcrumbNav] Cleared all existing widgets [BreadcrumbNav] Added segment 0: P01 [BreadcrumbNav] Added segment 1: All Photos [BreadcrumbNav] set_path() completed - 2 segments added [Breadcrumb] set_path() completed successfully [Breadcrumb] _update_breadcrumb() COMPLETED [GRID] Step 5: ‚úì gridReloaded signal emitted [GRID] ====== reload() COMPLETED SUCCESSFULLY ====== [GRID] Finally block: Setting _reloading=False 2026-02-02 15:25:17,757 [INFO] Refreshing Google Photos layout after scan... [GooglePhotosLayout] üì∑ Loading photos from database (thumb size: 200px)... [GooglePhotosLayout] üîÑ Clearing existing timeline and thumbnail cache... [GooglePhotosLayout] üîç Starting async photo load (generation 3)... [GooglePhotosLayout] ‚úÖ Photo load worker started (generation 3) 2026-02-02 15:25:17,757 [INFO] ‚úì Google Photos layout refreshed 2026-02-02 15:25:17,757 [INFO] ‚úÖ Final refresh complete: 15 photos, 0 videos 2026-02-02 15:25:17,771 [INFO] [FoldersSection] Loaded 2 folders (gen 3) 2026-02-02 15:25:17,773 [INFO] [FoldersSection] Tree built with 1 top-level folders 2026-02-02 15:25:17,773 [INFO] [FoldersSection] Data loaded successfully (gen 3) 2026-02-02 15:25:17,773 [INFO] [FoldersSection] Tree built with 1 top-level folders 2026-02-02 15:25:17,821 [INFO] [AccordionSidebar] Section folders loaded and displayed 2026-02-02 15:25:17,821 [INFO] Photo query complete: generation=3, current=3, rows=15 [GooglePhotosLayout] üìÖ Grouping 15 photos by date... [GooglePhotosLayout] ‚úÖ Grouped into 9 date groups [GooglePhotosLayout] Tracking 15 paths for multi-selection [GooglePhotosLayout] üöÄ Setting up virtual scrolling for 9 date groups... [GooglePhotosLayout] üìê Responsive grid: 7 columns (viewport: 1517px, thumb: 200px) [GooglePhotosLayout] ‚úÖ Virtual scrolling enabled: 9 total date groups [GooglePhotosLayout] üìä Rendered: 5 groups | Placeholders: 4 groups [GooglePhotosLayout] üñºÔ∏è Queued 9 thumbnails for loading (initial limit: 50) [GooglePhotosLayout] ‚úÖ Photo loading complete! Thumbnails will load progressively. 2026-02-02 15:25:18,939 [INFO] No more photos to process 2026-02-02 15:25:18,939 [INFO] Backfill complete: AssetBackfillStats(scanned=15, hashed=15, linked=15, errors=0, skipped=0) 2026-02-02 15:25:18,939 [INFO] Hash backfill complete: 15 scanned, 15 hashed, 15 linked 2026-02-02 15:25:18,939 [INFO] Found 4 exact duplicate groups 2026-02-02 15:25:18,939 [INFO] [SemanticEmbeddingService] Initialized with model=clip-vit-b32 2026-02-02 15:25:18,976 [INFO] Found 15 photos needing embeddings - generating in background 2026-02-02 15:25:18,988 [INFO] [SemanticEmbeddingWorker] Using project canonical model: clip-vit-b32 (project_id=1) 2026-02-02 15:25:18,988 [INFO] [SemanticEmbeddingWorker] Starting batch: 15 photos, model=clip-vit-b32, force=False, project=1 2026-02-02 15:25:21,951 [INFO] [SemanticEmbeddingWorker] Batch complete: 15 success, 0 skipped, 0 failed in 2.9s 2026-02-02 15:25:21,951 [INFO] Embedding generation complete: 15 generated 2026-02-02 15:25:21,957 [INFO] [SemanticEmbeddingService] Initialized with model=clip-vit-b32 2026-02-02 15:25:21,994 [INFO] Starting similar shot stack generation for project 1 2026-02-02 15:25:21,994 [INFO] Parameters: StackGenParams(rule_version='1', time_window_seconds=30, min_stack_size=2, top_k=30, similarity_threshold=0.5, candidate_limit_per_photo=300) 2026-02-02 15:25:22,000 [INFO] Cleared 0 similar stacks (rule v1) 2026-02-02 15:25:22,000 [INFO] Cleared 0 existing similar shot stacks for rule v1 2026-02-02 15:25:22,005 [INFO] Representative-only mode enabled: 15 ‚Üí 10 photos considered 2026-02-02 15:25:22,005 [INFO] Found 10 photos with timestamps 2026-02-02 15:25:22,005 [INFO] [SemanticEmbeddingService] Loaded 15 embeddings for project 1 2026-02-02 15:25:22,005 [INFO] Batch-loaded 15 embeddings for similarity comparison 2026-02-02 15:25:22,026 [INFO] Found 4 similar shot clusters 2026-02-02 15:25:22,185 [INFO] Similar shot stack generation complete: 4 stacks, 8 memberships, 0 errors 2026-02-02 15:25:22,185 [INFO] Created 4 similar shot stacks 2026-02-02 15:25:22,199 [INFO] [AccordionSidebar] Reloading section: duplicates 2026-02-02 15:25:22,264 [INFO] [AccordionSidebar] Section duplicates loaded and displayed 2026-02-02 15:25:35,681 [INFO] [FacePipelineService] Starting pipeline for project 1 (scope=15 photos, model=buffalo_l) 2026-02-02 15:25:35,686 [INFO] [FacePipelineWorker] Starting face pipeline for project 1 (thread=Dummy-13, is_main=False) 2026-02-02 15:25:35,703 [INFO] ‚úì HEIC/HEIF support enabled for face detection (pillow_heif v1.1.1) 2026-02-02 15:25:35,705 [INFO] [FaceDetectionWorker] Starting face detection for project 1 (thread=Dummy-13, is_main=False) 2026-02-02 15:25:35,705 [INFO] [FaceDetectionLogger] Logging to: C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03\.memorymate\logs\face_detection\face_detection_p1_20260202_152535.jsonl 2026-02-02 15:25:35,740 [INFO] üíª Using CPU for face detection (CUDA not available) 2026-02-02 15:25:35,740 [INFO] üìÅ Using local bundled models: C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03\models\buffalo_l 2026-02-02 15:25:35,745 [INFO] ‚úì Initializing InsightFace with buffalo_l directory: C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03\models\buffalo_l 2026-02-02 15:25:35,745 [INFO] üì¶ InsightFace version: 0.2.1 2026-02-02 15:25:35,770 [INFO] ‚úì Using ctx_id approach (older InsightFace v0.2.1, proof of concept compatible) 2026-02-02 15:25:35,770 [INFO] ‚úì Version detection: API signature check confirmed no providers parameter (older API) find model: C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03\models\buffalo_l\buffalo_l\scrfd_10g_bnkps.onnx detection input mean and std: 127.5 127.5 find model: C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03\models\buffalo_l\buffalo_l\w600k_r50.onnx recognition 2026-02-02 15:25:36,551 [INFO] ‚úì Using CPU acceleration (ctx_id=-1) set det-size: (640, 640) 2026-02-02 15:25:37,046 [INFO] ‚úÖ InsightFace (buffalo_l) loaded successfully with CPU acceleration (det_size=640x640) 2026-02-02 15:25:37,048 [INFO] [FaceDetection] Initialized InsightFace with model=buffalo_l 2026-02-02 15:25:37,048 [INFO] [FaceDetectionWorker] Using scope-selected photos: 15 photos 2026-02-02 15:25:37,049 [INFO] [FaceDetectionWorker] Processing 15 photos 2026-02-02 15:25:37,051 [INFO] üíª Using CPU for face detection (CUDA not available) 2026-02-02 15:25:37,053 [INFO] [FaceDetectionLogger] Session started: 20260202_152535 2026-02-02 15:25:37,054 [INFO] [FaceDetectionWorker] üíª Sequential processing: GPU=not available, photos=15, batch_enabled=True 2026-02-02 15:25:37,499 [INFO] [FaceDetection] Found 1 faces in img_6995_2_2_2.jpeg 2026-02-02 15:25:38,010 [INFO] [FaceDetection] Found 3 faces in img_6850_2_2_2.jpeg 2026-02-02 15:25:38,391 [INFO] [FaceDetection] Found 1 faces in alya2_2_2_2_2.jpeg 2026-02-02 15:25:38,661 [INFO] [FaceDetection] Found 1 faces in alya1_2_2_2.jpeg 2026-02-02 15:25:38,938 [INFO] [FaceDetection] Found 1 faces in alya1_3_2.jpeg 2026-02-02 15:25:39,233 [INFO] [FaceDetection] Found 1 faces in ammar2_2_2_2 - kopie.jpeg 2026-02-02 15:25:39,551 [INFO] [FaceDetection] Found 1 faces in ammar2_2_2_2.jpeg 2026-02-02 15:25:39,899 [INFO] [FaceDetection] Found 1 faces in ammar1_2_2_2.jpeg 2026-02-02 15:25:40,249 [INFO] [FaceDetection] Found 3 faces in alya3_2_2_2_2.jpeg 2026-02-02 15:25:40,434 [INFO] [FaceDetection] Found 1 faces in alya_2_2.jpeg 2026-02-02 15:25:40,596 [INFO] [FaceDetection] Found 1 faces in alya_2_2_2_2.jpeg 2026-02-02 15:25:40,754 [INFO] [FaceDetection] Found 1 faces in ammar-ref(1)_2_2.png 2026-02-02 15:25:40,928 [INFO] [FaceDetection] Found 1 faces in ammar-ref_2_2_2.png 2026-02-02 15:25:41,102 [INFO] [FaceDetection] Found 1 faces in ammar-ref_3_2.png 2026-02-02 15:25:41,349 [INFO] [FaceDetection] Found 2 faces in ammar3_2_2_2_2.jpeg 2026-02-02 15:25:41,421 [INFO] [FaceDetectionWorker] Complete in 5.7s: 15 processed (15 with faces), 0 skipped, 20 faces detected, 0 failed ====================================================================== Performance Report: face_detection_project_1 ====================================================================== Total Duration: 5.72s Total Operations: 3 (3 succeeded, 0 failed) Operation Breakdown: ---------------------------------------------------------------------- process_all_photos: Count: 1 Total: 4.37s (76.4% of total) Avg: 4.367s Min/Max: 4.367s / 4.367s Median: 4.367s initialize_face_service: Count: 1 Total: 1.34s (23.5% of total) Avg: 1.343s Min/Max: 1.343s / 1.343s Median: 1.343s get_photos_to_process: Count: 1 Total: 0.00s (0.0% of total) Avg: 0.001s Min/Max: 0.001s / 0.001s Median: 0.001s ====================================================================== ‚ö†Ô∏è BOTTLENECK DETECTED: process_all_photos takes 76.4% of total time Consider optimizing this operation for best performance gains ====================================================================== 2026-02-02 15:25:41,421 [INFO] [FaceDetectionLogger] Session complete: 15 photos, 20 faces, 0 errors, 4.4s 2026-02-02 15:25:41,421 [INFO] [FaceDetectionWorker] Session log saved: C:\Users\suleimaa\Downloads\Photo-Sorter\11.01.01.01-Photo-App\MemoryMate-PhotoFlow-Refactored-main-03\.memorymate\logs\face_detection\face_detection_p1_20260202_152535.jsonl 2026-02-02 15:25:41,421 [INFO] [FacePipelineWorker] Detection complete: 20 faces in 15 images 2026-02-02 15:25:41,642 [INFO] [FaceClusterWorker] Starting face clustering for project 1 (thread=Dummy-13, is_main=False) 2026-02-02 15:25:41,642 [INFO] [FaceClusterWorker] Loaded 30 face embeddings 2026-02-02 15:25:41,674 [INFO] [FaceClusterWorker] Found 9 clusters 2026-02-02 15:25:41,674 [INFO] [FaceClusterWorker] Found 3 unclustered faces (will create 'Unidentified' branch) 2026-02-02 15:25:41,739 [INFO] [FaceClusterWorker] Clustering Quality Analysis: - Overall Quality: 85.1/100 (Excellent) - Silhouette Score: 0.837 (Excellent) - Davies-Bouldin Index: 0.478 (Excellent) - Noise Ratio: 10.0% - Avg Cluster Compactness: 0.019 - Avg Cluster Separation: 0.866 2026-02-02 15:25:41,739 [INFO] [FaceClusterWorker] Parameter Tuning Suggestions: 2026-02-02 15:25:41,739 [INFO] 1. 1 clusters have poor silhouette scores: These clusters may need manual review or re-clustering. 2026-02-02 15:25:42,022 [INFO] [FaceClusterWorker] Cluster 0 ‚Üí 4 faces 2026-02-02 15:25:42,228 [INFO] [FaceClusterWorker] Cluster 1 ‚Üí 1 faces 2026-02-02 15:25:42,425 [INFO] [FaceClusterWorker] Cluster 2 ‚Üí 1 faces 2026-02-02 15:25:42,638 [INFO] [FaceClusterWorker] Cluster 3 ‚Üí 1 faces 2026-02-02 15:25:42,848 [INFO] [FaceClusterWorker] Cluster 4 ‚Üí 3 faces 2026-02-02 15:25:43,227 [INFO] [FaceClusterWorker] Cluster 5 ‚Üí 2 faces 2026-02-02 15:25:43,465 [INFO] [FaceClusterWorker] Cluster 6 ‚Üí 1 faces 2026-02-02 15:25:43,512 [INFO] [FaceClusterWorker] Cluster 7 ‚Üí 2 faces 2026-02-02 15:25:43,544 [INFO] [FaceClusterWorker] Cluster 8 ‚Üí 2 faces 2026-02-02 15:25:43,544 [INFO] [FaceClusterWorker] üìä Cluster Loop Performance Breakdown: 2026-02-02 15:25:43,544 [INFO] - Quality Analysis: 1.81s (100.0%) 2026-02-02 15:25:43,544 [INFO] - Database Operations: 0.00s (0.0%) 2026-02-02 15:25:43,544 [INFO] - Total Measured: 1.81s 2026-02-02 15:25:43,544 [INFO] [FaceClusterWorker] ‚úÖ Optimizations: Reused FaceQualityAnalyzer instance + batch INSERT with executemany() 2026-02-02 15:25:43,544 [INFO] [FaceClusterWorker] Created 'Unidentified' branch with 3 faces from 2 photos (batch-linked) 2026-02-02 15:25:43,544 [INFO] [FaceClusterWorker] Complete in 1.9s: 9 person clusters + 3 unidentified faces ====================================================================== Performance Report: face_clustering_project_1 ====================================================================== Total Duration: 1.90s Total Operations: 7 (7 succeeded, 0 failed) Operation Breakdown: ---------------------------------------------------------------------- save_cluster_results: Count: 1 Total: 1.81s (94.9% of total) Avg: 1.806s Min/Max: 1.806s / 1.806s Median: 1.806s analyze_clustering_quality: Count: 1 Total: 0.06s (3.4% of total) Avg: 0.064s Min/Max: 0.064s / 0.064s Median: 0.064s dbscan_clustering: Count: 1 Total: 0.03s (1.7% of total) Avg: 0.033s Min/Max: 0.033s / 0.033s Median: 0.033s load_embeddings: Count: 1 Total: 0.00s (0.0% of total) Avg: 0.000s Min/Max: 0.000s / 0.000s Median: 0.000s clear_previous_clusters: Count: 1 Total: 0.00s (0.0% of total) Avg: 0.000s Min/Max: 0.000s / 0.000s Median: 0.000s handle_unclustered_faces: Count: 1 Total: 0.00s (0.0% of total) Avg: 0.000s Min/Max: 0.000s / 0.000s Median: 0.000s database_commit: Count: 1 Total: 0.00s (0.0% of total) Avg: 0.000s Min/Max: 0.000s / 0.000s Median: 0.000s ====================================================================== ‚ö†Ô∏è BOTTLENECK DETECTED: save_cluster_results takes 94.9% of total time Consider optimizing this operation for best performance gains ====================================================================== 2026-02-02 15:25:43,544 [INFO] [FacePipelineWorker] Clustering complete: 9 clusters from 30 faces 2026-02-02 15:25:43,815 [INFO] [PeopleSection] Loading face clusters (generation 3)‚Ä¶ 2026-02-02 15:25:43,815 [INFO] [UIRefreshMediator] Refreshed people (google, pid=1) 2026-02-02 15:25:43,838 [INFO] [PeopleSection] Loaded 10 clusters (gen 3) 2026-02-02 15:25:43,974 [INFO] [PeopleSection] Grid built with 10 people (search enabled) 2026-02-02 15:25:43,990 [INFO] [PeopleSection] Grid built with 10 people (search enabled) 2026-02-02 15:25:44,055 [INFO] [AccordionSidebar] Section people loaded and displayed 2026-02-02 15:25:49,493 [INFO] [AccordionSidebar] Expanding section: people 2026-02-02 15:25:49,499 [INFO] [PeopleSection] Loading face clusters (generation 4)‚Ä¶ 2026-02-02 15:25:49,506 [INFO] [PeopleSection] Loaded 10 clusters (gen 4) 2026-02-02 15:25:49,528 [INFO] [PeopleSection] Grid built with 10 people (search enabled) 2026-02-02 15:25:49,556 [INFO] [PeopleSection] Grid built with 10 people (search enabled) 2026-02-02 15:25:49,615 [INFO] [AccordionSidebar] Section people loaded and displayed 2026-02-02 15:25:53,086 [INFO] [GooglePhotosLayout] Accordion person clicked: face_000 [GooglePhotosLayout] üì∑ Loading photos from database (thumb size: 200px) [person=face_000]... [GooglePhotosLayout] üîÑ Clearing existing timeline and thumbnail cache... [GooglePhotosLayout] üîç Starting async photo load (generation 4)... [GooglePhotosLayout] ‚úÖ Photo load worker started (generation 4) 2026-02-02 15:25:53,092 [INFO] Photo query complete: generation=4, current=4, rows=4 [GooglePhotosLayout] üìÖ Grouping 4 photos by date... [GooglePhotosLayout] ‚úÖ Grouped into 3 date groups [GooglePhotosLayout] Tracking 4 paths for multi-selection [GooglePhotosLayout] üöÄ Setting up virtual scrolling for 3 date groups... [GooglePhotosLayout] ‚úÖ Virtual scrolling enabled: 3 total date groups [GooglePhotosLayout] üìä Rendered: 3 groups | Placeholders: 0 groups [GooglePhotosLayout] üñºÔ∏è Queued 4 thumbnails for loading (initial limit: 50) [GooglePhotosLayout] ‚úÖ Photo loading complete! Thumbnails will load progressively. 2026-02-02 15:25:58,707 [INFO] [GooglePhotosLayout] Accordion person clicked: face_004 [GooglePhotosLayout] üì∑ Loading photos from database (thumb size: 200px) [person=face_004]... [GooglePhotosLayout] üîÑ Clearing existing timeline and thumbnail cache... [GooglePhotosLayout] üîç Starting async photo load (generation 5)... [GooglePhotosLayout] ‚úÖ Photo load worker started (generation 5) 2026-02-02 15:25:58,711 [INFO] Photo query complete: generation=5, current=5, rows=3 [GooglePhotosLayout] üìÖ Grouping 3 photos by date... [GooglePhotosLayout] ‚úÖ Grouped into 2 date groups [GooglePhotosLayout] Tracking 3 paths for multi-selection [GooglePhotosLayout] üöÄ Setting up virtual scrolling for 2 date groups... [GooglePhotosLayout] ‚úÖ Virtual scrolling enabled: 2 total date groups [GooglePhotosLayout] üìä Rendered: 2 groups | Placeholders: 0 groups [GooglePhotosLayout] üñºÔ∏è Queued 3 thumbnails for loading (initial limit: 50) [GooglePhotosLayout] ‚úÖ Photo loading complete! Thumbnails will load progressively. 2026-02-02 15:26:00,628 [INFO] [GooglePhotosLayout] Accordion person clicked: face_007 [GooglePhotosLayout] üì∑ Loading photos from database (thumb size: 200px) [person=face_007]... [GooglePhotosLayout] üîÑ Clearing existing timeline and thumbnail cache... [GooglePhotosLayout] üîç Starting async photo load (generation 6)... [GooglePhotosLayout] ‚úÖ Photo load worker started (generation 6) 2026-02-02 15:26:00,637 [INFO] Photo query complete: generation=6, current=6, rows=2 [GooglePhotosLayout] üìÖ Grouping 2 photos by date... [GooglePhotosLayout] ‚úÖ Grouped into 2 date groups [GooglePhotosLayout] Tracking 2 paths for multi-selection [GooglePhotosLayout] üöÄ Setting up virtual scrolling for 2 date groups... [GooglePhotosLayout] ‚úÖ Virtual scrolling enabled: 2 total date groups [GooglePhotosLayout] üìä Rendered: 2 groups | Placeholders: 0 groups [GooglePhotosLayout] üñºÔ∏è Queued 2 thumbnails for loading (initial limit: 50) [GooglePhotosLayout] ‚úÖ Photo loading complete! Thumbnails will load progressively. 2026-02-02 15:26:05,369 [INFO] [GooglePhotosLayout] Accordion person clicked: face_005 [GooglePhotosLayout] üì∑ Loading photos from database (thumb size: 200px) [person=face_005]... [GooglePhotosLayout] üîÑ Clearing existing timeline and thumbnail cache... [GooglePhotosLayout] üîç Starting async photo load (generation 7)... [GooglePhotosLayout] ‚úÖ Photo load worker started (generation 7) 2026-02-02 15:26:05,369 [INFO] Photo query complete: generation=7, current=7, rows=2 [GooglePhotosLayout] üìÖ Grouping 2 photos by date... [GooglePhotosLayout] ‚úÖ Grouped into 1 date groups [GooglePhotosLayout] Tracking 2 paths for multi-selection [GooglePhotosLayout] üöÄ Setting up virtual scrolling for 1 date groups... [GooglePhotosLayout] ‚úÖ Virtual scrolling enabled: 1 total date groups [GooglePhotosLayout] üìä Rendered: 1 groups | Placeholders: 0 groups [GooglePhotosLayout] üñºÔ∏è Queued 2 thumbnails for loading (initial limit: 50) [GooglePhotosLayout] ‚úÖ Photo loading complete! Thumbnails will load progressively. 2026-02-02 15:26:07,839 [INFO] [GooglePhotosLayout] Accordion person clicked: face_unidentified [GooglePhotosLayout] üì∑ Loading photos from database (thumb size: 200px) [person=face_unidentified]... [GooglePhotosLayout] üîÑ Clearing existing timeline and thumbnail cache... [GooglePhotosLayout] üîç Starting async photo load (generation 8)... [GooglePhotosLayout] ‚úÖ Photo load worker started (generation 8) 2026-02-02 15:26:07,839 [INFO] Photo query complete: generation=8, current=8, rows=2 [GooglePhotosLayout] üìÖ Grouping 2 photos by date... [GooglePhotosLayout] ‚úÖ Grouped into 2 date groups [GooglePhotosLayout] Tracking 2 paths for multi-selection [GooglePhotosLayout] üöÄ Setting up virtual scrolling for 2 date groups... [GooglePhotosLayout] ‚úÖ Virtual scrolling enabled: 2 total date groups [GooglePhotosLayout] üìä Rendered: 2 groups | Placeholders: 0 groups [GooglePhotosLayout] üñºÔ∏è Queued 2 thumbnails for loading (initial limit: 50) [GooglePhotosLayout] ‚úÖ Photo loading complete! Thumbnails will load progressively. 2026-02-02 15:26:11,838 [INFO] [GooglePhotosLayout] Accordion person clicked: face_008 [GooglePhotosLayout] üì∑ Loading photos from database (thumb size: 200px) [person=face_008]... [GooglePhotosLayout] üîÑ Clearing existing timeline and thumbnail cache... [GooglePhotosLayout] üîç Starting async photo load (generation 9)... [GooglePhotosLayout] ‚úÖ Photo load worker started (generation 9) 2026-02-02 15:26:11,838 [INFO] Photo query complete: generation=9, current=9, rows=2 [GooglePhotosLayout] üìÖ Grouping 2 photos by date... [GooglePhotosLayout] ‚úÖ Grouped into 1 date groups [GooglePhotosLayout] Tracking 2 paths for multi-selection [GooglePhotosLayout] üöÄ Setting up virtual scrolling for 1 date groups... [GooglePhotosLayout] ‚úÖ Virtual scrolling enabled: 1 total date groups [GooglePhotosLayout] üìä Rendered: 1 groups | Placeholders: 0 groups [GooglePhotosLayout] üñºÔ∏è Queued 2 thumbnails for loading (initial limit: 50) [GooglePhotosLayout] ‚úÖ Photo loading complete! Thumbnails will load progressively. 2026-02-02 15:26:57,104 [INFO] Database schema initialized successfully 2026-02-02 15:26:57,107 [INFO] DBWriter timer started in worker thread 2026-02-02 15:26:57,107 [INFO] [ScanWorkerAdapter] Starting scan of C:/Users/suleimaa/Desktop (thread=Dummy-17, is_main=False) 2026-02-02 15:26:57,110 [INFO] Starting scan: C:/Users/suleimaa/Desktop (incremental=True, skip_unchanged=True) 2026-02-02 15:26:57,223 [INFO] Discovered 196 candidate image files and 3 video files 2026-02-02 15:26:57,223 [INFO] Loading existing metadata for incremental scan... 2026-02-02 15:26:57,238 [INFO] ‚úì Loaded 15 existing photo records and 0 video records [SCAN] Created single executor for scan (196 files)
